// Generated by CoffeeScript 1.8.0
var URL, logger;

URL = require("url");

logger = function(settings) {
  return function(request, callback) {
    var replay;
    replay = request.replay;
    logger = replay.logger;
    logger.log("Replay: Requesting " + request.method + " " + (URL.format(request.path)));
    request.on("response", function(response) {
      return logger.log("Replay: Received " + response.statusCode + " " + (URL.format(request.path)));
    });
    request.on("error", function(error) {
      if (!replay.isIgnored(request.url.hostname)) {
        return replay.emit("error", error);
      }
    });
    callback();
  };
};

module.exports = logger;
